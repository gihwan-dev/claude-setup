---
name: milestone-execute
description: 마일스톤 다음 단계 실행. milestone.md의 미완료 Phase를 plan.md 기반으로 구현. "다음 작업", "마일스톤 실행", "Phase 진행" 등의 요청 시 사용
disable-model-invocation: false
argument-hint: "[Phase 번호] (생략 시 다음 미완료 Phase 자동 선택)"
---

# 워크플로우: 마일스톤 Phase 실행

**목표**: `milestone.md`에서 다음 미완료 Phase를 식별하고, `plan.md`의 구현 상세를 참고하여 실제 코드를 구현합니다.

## 1단계: 컨텍스트 로드

프로젝트 루트에서 다음 3개 파일을 읽습니다:

1. `milestone.md` — 작업 목록 및 진행 상태
2. `plan.md` — 구현 상세 (아키텍처, 디렉토리 구조, 데이터 흐름 등)
3. `survey.md` — 요구사항 및 아키텍처 결정 사항

- 파일이 없으면 사용자에게 알리고 해당 스킬(`/milestone`, `/planner`, `/survey`)로 먼저 생성하도록 안내합니다.

## 2단계: 대상 Phase 판별

- 인자로 Phase 번호가 주어진 경우: 해당 Phase를 대상으로 선택합니다.
- 인자가 없는 경우: `milestone.md`에서 **첫 번째 미완료(`[ ]`) 항목이 포함된 Phase**를 자동 선택합니다.
- 모든 Phase가 완료된 경우: 사용자에게 "모든 마일스톤이 완료되었습니다"를 알리고 종료합니다.

선택된 Phase와 포함된 작업 항목들을 사용자에게 보여주고 진행 여부를 확인합니다.

## 3단계: 태스크 리스트 생성

해당 Phase의 미완료 체크박스 항목들을 `TaskCreate`로 태스크 리스트에 등록합니다.

- **subject**: 체크박스의 볼드 텍스트 (작업 제목)
- **description**: 해당 항목의 목표, 포함 내용, 검증 기준 + `plan.md`에서 관련 구현 상세
- **activeForm**: 작업 제목의 현재진행형 (예: "조건부 서식 데이터 모델 구현" → "조건부 서식 데이터 모델 구현 중")

이미 완료(`[x]`)된 항목은 건너뜁니다.

## 4단계: 구현 실행

태스크 리스트의 각 항목을 **순차적으로** 실행합니다.

각 작업 항목에 대해:

1. `TaskUpdate`로 상태를 `in_progress`로 변경합니다.
2. `plan.md`의 해당 Phase 구현 상세를 참고하여 코드를 작성합니다.
3. `survey.md`의 아키텍처 결정 사항을 준수합니다.
4. 구현 완료 후 `TaskUpdate`로 상태를 `completed`로 변경합니다.

### 구현 시 준수 사항

- `CLAUDE.md`의 아키텍처 패턴 및 디렉토리 구조를 따릅니다.
- FSD(Feature-Sliced Design) 원칙을 준수합니다.
- 기존 코드베이스의 패턴과 컨벤션을 따릅니다.
- 보안 취약점을 도입하지 않습니다.

## 5단계: 검증

각 작업 항목의 "검증" 기준에 따라 검증을 수행합니다.

- `pnpm run typecheck` — TypeScript 타입 검사
- `pnpm run lint` — ESLint + Stylelint 검사
- `pnpm run test:unit` — 관련 단위 테스트 실행 (테스트가 있는 경우)

검증 실패 시:
1. 오류를 분석하고 수정합니다.
2. 수정 후 다시 검증합니다.
3. 반복적으로 실패하면 사용자에게 보고하고 판단을 요청합니다.

## 6단계: 마일스톤 업데이트

모든 작업이 완료되면 `/milestone-update` 스킬을 호출하여:

- 완료된 체크박스를 `[x]`로 업데이트합니다.
- 세션 노트에 구현 요약을 추가합니다.

## 7단계: 결과 보고

실행 결과를 사용자에게 보고합니다:

- 완료된 Phase 번호 및 제목
- 구현된 작업 항목 목록
- 검증 결과 (typecheck, lint, test)
- 다음 미완료 Phase 안내 (있는 경우)
